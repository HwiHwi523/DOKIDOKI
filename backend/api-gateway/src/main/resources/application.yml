jwt:
  secret: CEV5lPhLfU3RdjTqoHBfEHNrIWAGDRTZfFSLAO5X

spring:
  cloud:
    gateway:
      default-filters:
        - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Credentials
      globalcors:
        cors-configurations:
          '[/**]':
            allowedOrigins:
              - '*'
            allow-credentials: false
            allowedHeaders: '*'
            allowedMethods: '*'
      routes:
      - id: bid-server
        uri: http://bid-server:8081
        predicates:
          - Path=/api/bids/**
        filters:
          - RewritePath=/api/bid/(?<segment>.*), /$\{segment}
          - JwtAuthenticationFilter

      - id: auction-server
        uri: http://auction-server:8082
        predicates:
          - Path=/api/auctions/**
        filters:
          - RewritePath=/api/auction/(?<segment>.*), /$\{segment}
          - JwtAuthenticationFilter

      - id: user-server
        uri: http://user-server:8083
        predicates:
          - Path=/api/users/**
        filters:
          - RewritePath=/api/user/(?<segment>.*), /$\{segment}

      - id: user-server
        uri: http://user-server:8083
        predicates:
          - Path=/api/users/**
          - Method=DELETE
        filters:
          - RewritePath=/api/user/(?<segment>.*), /$\{segment}
          - JwtAuthenticationFilter